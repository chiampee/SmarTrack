<!DOCTYPE html>
<html>
<head>
    <title>Clear Cache - SmarTrack</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .card {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 { color: #4F46E5; }
        .step {
            background: #f0f9ff;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #4F46E5;
            border-radius: 5px;
        }
        .button {
            display: inline-block;
            background: #4F46E5;
            color: white;
            padding: 12px 24px;
            border-radius: 6px;
            text-decoration: none;
            margin: 10px 5px;
        }
        .button:hover {
            background: #4338CA;
        }
        code {
            background: #f1f5f9;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="card">
        <h1>üîÑ Clear Your Browser Cache</h1>
        <p><strong>The CSP fix is live on the server, but your browser is caching old headers.</strong></p>
        
        <h2>‚úÖ Quick Fix - Choose Your Method:</h2>
        
        <div class="step">
            <h3>Method 1: DevTools Hard Reload (Recommended)</h3>
            <ol>
                <li>Press <code>F12</code> to open Developer Tools</li>
                <li>Keep DevTools OPEN</li>
                <li><strong>Right-click</strong> the refresh button (‚ü≥) in your browser</li>
                <li>Select <strong>"Empty Cache and Hard Reload"</strong></li>
            </ol>
        </div>
        
        <div class="step">
            <h3>Method 2: Keyboard Shortcut</h3>
            <ul>
                <li><strong>Windows/Linux:</strong> Press <code>Ctrl + F5</code></li>
                <li><strong>Mac:</strong> Press <code>Cmd + Shift + R</code></li>
            </ul>
        </div>
        
        <div class="step">
            <h3>Method 3: Clear All Cache</h3>
            <ol>
                <li>Press <code>Ctrl + Shift + Delete</code> (Windows) or <code>Cmd + Shift + Delete</code> (Mac)</li>
                <li>Select "Cached images and files"</li>
                <li>Choose "All time" or "Last hour"</li>
                <li>Click "Clear data"</li>
            </ol>
        </div>
        
        <div class="step">
            <h3>Method 4: Use Incognito/Private Mode (Easiest)</h3>
            <ul>
                <li><strong>Chrome/Edge:</strong> <code>Ctrl/Cmd + Shift + N</code></li>
                <li><strong>Firefox:</strong> <code>Ctrl/Cmd + Shift + P</code></li>
                <li><strong>Safari:</strong> <code>Cmd + Shift + N</code></li>
            </ul>
            <p>Then visit: <a href="https://smar-track.vercel.app/">https://smar-track.vercel.app/</a></p>
        </div>
        
        <h2>üéØ After Clearing Cache:</h2>
        <p><strong>You should NO LONGER see these errors:</strong></p>
        <ul>
            <li>‚ùå "Loading the stylesheet 'https://fonts.googleapis.com/...' violates CSP"</li>
            <li>‚ùå "Framing 'https://dev-a5hqcneif6ghl018.us.auth0.com/' violates CSP"</li>
        </ul>
        
        <p><strong>You WILL see:</strong></p>
        <ul>
            <li>‚úÖ Google Fonts loading properly</li>
            <li>‚úÖ Auth0 login working</li>
            <li>‚úÖ No CSP errors in console</li>
        </ul>
        
        <div style="text-align: center; margin-top: 30px;">
            <a href="https://smar-track.vercel.app/" class="button">Go to SmarTrack</a>
            <a href="https://smar-track.vercel.app/" class="button" onclick="location.reload(true); return false;">Hard Reload This Page</a>
        </div>
        
        <hr style="margin: 30px 0;">
        
        <h3>üìä Technical Details (for verification):</h3>
        <p><strong>Server is now serving:</strong></p>
        <pre style="background: #1e293b; color: #e2e8f0; padding: 15px; border-radius: 5px; overflow-x: auto; font-size: 12px;">
style-src 'self' 'unsafe-inline' https://fonts.googleapis.com ‚úÖ
font-src 'self' data: https://fonts.gstatic.com ‚úÖ
frame-src https://dev-a5hqcneif6ghl018.us.auth0.com ‚úÖ</pre>
        
        <p><strong>Your browser is caching:</strong></p>
        <pre style="background: #7f1d1d; color: #fecaca; padding: 15px; border-radius: 5px; overflow-x: auto; font-size: 12px;">
style-src 'self' 'unsafe-inline' ‚ùå (missing fonts.googleapis.com)
frame-src (not set) ‚ùå (missing Auth0 iframe)</pre>
    </div>
    
    <script>
        // Auto-check if cache is cleared
        setTimeout(() => {
            fetch('https://smar-track.vercel.app/', { cache: 'reload' })
                .then(response => response.headers.get('content-security-policy'))
                .then(csp => {
                    if (csp && csp.includes('fonts.googleapis.com') && csp.includes('frame-src')) {
                        alert('‚úÖ Cache cleared! CSP is now correct. You can proceed to SmarTrack.');
                    }
                });
        }, 1000);
    </script>
</body>
</html>

